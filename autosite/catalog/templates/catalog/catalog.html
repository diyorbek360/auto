<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ö–∞—Ç–∞–ª–æ–≥ ‚Äî Techzone</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
* { box-sizing: border-box; font-family: 'Segoe UI', Roboto, Arial, sans-serif; }
body { margin:0; background:#f6f7f9; color:#222; }
.container { max-width:1300px; margin:0 auto; padding:20px; }
.layout { display:flex; gap:30px; align-items:flex-start; }

/* FILTERS */
.filters { width:280px; background:#fff; padding:22px; border-radius:16px; box-shadow:0 4px 14px rgba(0,0,0,0.06); }
.filters h2 { margin:0 0 20px; font-size:22px; }
.filter-group { margin-bottom:22px; }
.filter-group h4 { margin:0 0 10px; font-size:15px; color:#444; }
.filter-group label { display:flex; align-items:center; gap:8px; font-size:14px; margin-bottom:8px; cursor:pointer; }
.filter-group input[type="checkbox"] { accent-color:#ff6b35; }
.price-inputs { display:flex; align-items:center; gap:8px; margin-bottom:10px; }
.price-inputs input { width:100px; padding:6px 10px; border:1px solid #ddd; border-radius:4px; font-size:14px; text-align:right; }

.apply-btn { width:100%; padding:12px 0; border:none; border-radius:10px; background:#ff6b35; color:#fff; font-weight:600; font-size:16px; cursor:pointer; transition:0.2s; }
.apply-btn:hover { background:#e85a28; }

/* PRODUCTS */
.products { flex:1; }
.products h2 { margin-bottom:20px; }
.grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:24px; }
.card { background:#fff; border-radius:18px; overflow:hidden; box-shadow:0 4px 16px rgba(0,0,0,0.08); transition:transform 0.2s, box-shadow 0.2s; }
.card:hover { transform:translateY(-6px); box-shadow:0 12px 28px rgba(0,0,0,0.12); }
.card img { width:100%; height:240px; object-fit:contain; background:#fafafa; padding:15px; }
.card-body { padding:16px; }
.card-title { font-size:15px; font-weight:600; margin-bottom:6px; }
.card-price { font-size:20px; font-weight:700; margin-bottom:12px; }
.card a { display:block; text-align:center; text-decoration:none; background:#ff6b35; color:#fff; padding:10px; border-radius:10px; font-weight:600; }

/* –î–≤—É—Ö—Ç–æ—á–µ—á–Ω—ã–π –ø–æ–ª–∑—É–Ω–æ–∫ */
.range-slider {
  position: relative;
  height: 2px; /* –±—ã–ª–æ 8px, —Å—Ç–∞–ª–æ —Ç–æ–Ω—å—à–µ */
  width: 100%;
  background: #ddd;
  border-radius: 1px; /* —É–º–µ–Ω—å—à–∏–ª —Ä–∞–¥–∏—É—Å, —á—Ç–æ–±—ã —Å–æ–≤–ø–∞–¥–∞–ª–æ —Å —Ç–æ–ª—â–∏–Ω–æ–π */
  --range-left: 0%;
  --range-right: 100%;
  margin-top: 6px;
}

.range-slider input[type=range] {
  -webkit-appearance: none;
  position: absolute;
  width: 100%;
  height: 2px; /* —Ç–æ–∂–µ —É–º–µ–Ω—å—à–µ–Ω–æ */
  background: transparent;
  pointer-events: all;
}

.range-slider input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none;
  height: 20px;
  width: 20px;
  border-radius: 50%;
  background: #fff;
  border: 2px solid #ff6b35;
  cursor: pointer;
  position: relative;
  z-index: 2;
  margin-top: -4px; /* –ø–æ–¥–≥–æ–Ω—è–µ–º –ø–æ —Ü–µ–Ω—Ç—Ä—É —Ç–æ–Ω–∫–æ–π –ø–æ–ª–æ—Å–∫–∏ */
}

.range-slider input[type=range]::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: #fff;
  border: 2px solid #ff6b35;
  cursor: pointer;
  z-index: 2;
}

.range-slider::before {
  content: '';
  position: absolute;
  height: 2px; /* –ª–∏–Ω–∏—è –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏ —Ç–æ–∂–µ —Å—Ç–∞–ª–∞ —Ç–æ–Ω—å—à–µ */
  border-radius: 2px;
  background: #ff6b35;
  top: 0;
  left: var(--range-left);
  right: calc(100% - var(--range-right));
  z-index: 1;
}

/* SCROLL TOP BUTTON */
#scrollTopBtn { position:fixed; bottom:30px; right:30px; z-index:999; background:#ff6b35; color:#fff; border:none; border-radius:50%; width:50px; height:50px; font-size:24px; cursor:pointer; box-shadow:0 4px 12px rgba(0,0,0,0.2); display:none; transition:0.3s; }
#scrollTopBtn:hover { background:#e85a28; transform:translateY(-2px); }

/* BREADCRUMBS */
.breadcrumbs { font-size:14px; margin-bottom:20px; color:#555; }
.breadcrumbs a { color:#ff6b35; text-decoration:none; }
.breadcrumbs a:hover { text-decoration:underline; }
.breadcrumbs span { color:#222; }

/* HEADER */
.main-header { background:#fff; padding:15px 0; border-bottom:1px solid #eee; }
.header-content { display:flex; align-items:center; justify-content:space-between; }
.logo { font-size:26px; font-weight:700; color:#ff6b35; text-decoration:none; }
.search-bar { flex-grow:1; margin:0 30px; display:flex; }
.search-bar input { flex-grow:1; padding:10px 15px; border-radius:10px 0 0 10px; border:1px solid #ddd; outline:none; }
.search-bar button { padding:10px 15px; border:1px solid #ddd; border-left:none; background:#ff6b35; color:#fff; border-radius:0 10px 10px 0; cursor:pointer; }
</style>
</head>
<body>
<header class="main-header">
  <div class="container header-content">
    <a href="/" class="logo">TECHZONE</a>
    <form method="get" action="{% url 'catalog' %}" class="search-bar">
      <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞, –±—Ä–µ–Ω–¥–∞ –∏–ª–∏ –º–æ–¥–µ–ª–∏..." value="{{ request.GET.q }}">
      <button type="submit">üîç</button>
    </form>
    <div class="user-actions">
  <span>{{ t.profile.lang }}</span>
      <div class="cart-icon">
        <span>{{ t.cart.lang }}</span>
        <span class="badge">{{ cart_count }}</span>
      </div>
    </div>
  </div>
</header>



<button id="scrollTopBtn" title="–í–≤–µ—Ä—Ö">‚Üë</button>

<div class="container">
  <nav class="breadcrumbs">
    <a href="/">–ì–ª–∞–≤–Ω–∞—è</a> &gt;
    <a href="/catalog/mobile/">–ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</a> &gt;
  <span>–°–º–∞—Ä—Ç—Ñ–æ–Ω—ã</span>
  </nav>
  <div class="layout">
    <!-- FILTERS -->
    <aside class="filters">
      <h2>–§–∏–ª—å—Ç—Ä—ã</h2>
      <form method="get">
        <div class="filter-group">
          <h4>–¶–µ–Ω–∞ (—Å—É–º)</h4>
          <div class="price-inputs">
            <input type="number" id="input-min" name="min_price" value="{{ min_price }}" min="{{ price_min }}" max="{{ price_max }}">
            <span>‚Äî</span>
            <input type="number" id="input-max" name="max_price" value="{{ max_price }}" min="{{ price_min }}" max="{{ price_max }}">
          </div>
          <div class="range-slider">
            <input type="range" id="price-min" min="{{ price_min }}" max="{{ price_max }}" value="{{ min_price }}">
            <input type="range" id="price-max" min="{{ price_min }}" max="{{ price_max }}" value="{{ max_price }}">
          </div>
        </div>
        <div class="filter-group">
          <h4>–ë—Ä–µ–Ω–¥</h4>
          {% for brand in brands %}
          <label><input type="checkbox" name="brand" value="{{ brand }}" {% if brand in selected_brands %}checked{% endif %}>{{ brand }}</label>
          {% endfor %}
        </div>
        <div class="filter-group">
          <h4>RAM (Gb)</h4>
          {% for r in rams %}
          <label><input type="checkbox" name="ram" value="{{ r }}" {% if r in selected_rams %}checked{% endif %}>{{ r }}</label>
          {% endfor %}
        </div>
        <div class="filter-group">
          <h4>–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å (Gb)</h4>
          {% for s in storages %}
          <label><input type="checkbox" name="storage" value="{{ s }}" {% if s in selected_storages %}checked{% endif %}>{{ s }}</label>
          {% endfor %}
        </div>
        <div class="filter-group">
          <h4>–¶–≤–µ—Ç</h4>
          {% for c in colors %}
          <label><input type="checkbox" name="color" value="{{ c }}" {% if c in selected_colors %}checked{% endif %}>{{ c }}</label>
          {% endfor %}
        </div>
        <button type="submit" class="apply-btn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
      </form>
    </aside>

    <!-- PRODUCTS -->
    <section class="products">
      <h2>–¢–æ–≤–∞—Ä—ã</h2>
      <div class="grid">
        {% for product in products %}
        <div class="card">
          <img src="{{ product.image.url }}" alt="{{ product.name }}">
          <div class="card-body">
            <div class="card-title">{{ product.brand }} {{ product.name }}</div>
            <div class="card-price">{{ product.price }} —Å—É–º</div>
            <a href="{% url 'product_detail' product.pk %}">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
          </div>
        </div>
        {% empty %}
        <p>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>
        {% endfor %}
      </div>
    </section>
  </div>
</div>

<script>
const priceMin = document.getElementById('price-min');
const priceMax = document.getElementById('price-max');
const inputMin = document.getElementById('input-min');
const inputMax = document.getElementById('input-max');
const slider = document.querySelector('.range-slider');

function updateSlider() {
  let minVal = parseInt(priceMin.value);
  let maxVal = parseInt(priceMax.value);
  if(minVal > maxVal-1){priceMin.value=maxVal-1;minVal=maxVal-1;}
  if(maxVal < minVal+1){priceMax.value=minVal+1;maxVal=minVal+1;}
  inputMin.value=minVal;
  inputMax.value=maxVal;
  const percent1=((minVal-parseInt(priceMin.min))/(parseInt(priceMin.max)-parseInt(priceMin.min)))*100;
  const percent2=((maxVal-parseInt(priceMin.min))/(parseInt(priceMin.max)-parseInt(priceMin.min)))*100;
  slider.style.setProperty('--range-left', percent1+'%');
  slider.style.setProperty('--range-right', percent2+'%');
}

priceMin.addEventListener('input', updateSlider);
priceMax.addEventListener('input', updateSlider);
inputMin.addEventListener('input',()=>{priceMin.value=inputMin.value;updateSlider();});
inputMax.addEventListener('input',()=>{priceMax.value=inputMax.value;updateSlider();});
updateSlider();

const scrollBtn = document.getElementById('scrollTopBtn');
window.onscroll = ()=>{scrollBtn.style.display=(document.documentElement.scrollTop>200)?'block':'none';};
scrollBtn.addEventListener('click',()=>{window.scrollTo({top:0,behavior:'smooth'});});
</script>
</body>
</html>
